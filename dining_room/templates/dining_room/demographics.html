{% extends "base.html" %}

{% block content %}
<div class="container">

<div class="row">
    <div class="col mt-4">
    <h3>Assisting a robot in a household task</h3>
    <p>This study involves the use of a web browser to assist a robot, which may have encountered an error, in completing a simple household task. You will be asked to provide the robot with information on what might have gone wrong and help it with recovering from the error.</p>
    <p>Your data is anonymized and no personally identifiable information will be solicited. We set a cookie to track your progress through the study, but the cookie is invalidated when the study session is complete and it cannot be reused on third-party websites.</p>
    <p>Your compensation is contingent on the your performance and conduct in the study. Noncompliance with the instructions will result in the forfeiture of compensation.</p>
    <p>You are eligible for this study if you are of sound mind, are above the age of 18, are fluent in English, and are comfortable with day-to-day computer use. Additionally this study must be completed using either the latest Google Chrome or the latest Mozilla Firefox web browsers.</p>
    <p><b>By completing the following questionnaire below, you agree that you have read the text above and agree to abide by it. You may choose to exit the study at any time, at the potential loss of your compensation.</b></p>
    </div>
</div>

<hr/>

{% spaceless %}
<div class="row justify-content-center">
    <form method="post" action="{% url 'dining_room:demographics' %}" class="col">
    {% csrf_token %}
    {% for hidden in form.hidden_fields %}
    {{ hidden }}
    {% endfor %}

    {% with radio_fields="age_group gender robot_experience" horizontal_radio_fields="gender robot_experience" %}
    {% for field in form.visible_fields %}

    {% if field.name in radio_fields.split and field.name in horizontal_radio_fields.split %}
        <fieldset class="form-group">
        <div class="row">
            <legend class="col col-form-label"><h5>{{ field.label }}</h5></legend>
        </div>
        {% if field.errors %}
        <div class="row">
        <div class="col alert alert-danger">{% for error in field.errors %}<p class="my-1">{{ error }}</p>{% endfor %}</div>
        </div>
        {% endif %}
        <div class="row">
        <div class="col btn-group" data-toggle="buttons">
            {% for value, name in field.field.choices %}
            {% if value != '' %}
            <label class="col btn btn-outline-dark form-check-label {% if value|safe == field.value|safe %}active{% endif %}">
            <input class="form-check-input" type="radio" name="{{ field.name }}" value="{{ value }}" style="visibility: hidden;" {% if value|safe == field.value|safe %}checked{% endif %}> {{ name }}
            </label>
            {% endif %}
            {% endfor %}
        </div>
        </div>
        </fieldset>
    {% elif field.name in radio_fields.split %}
        <fieldset class="form-group">
        {% if field.errors %}
        <div class="row">
        <div class="col alert alert-danger">{% for error in field.errors %}<p class="my-1">{{ error }}</p>{% endfor %}</div>
        </div>
        {% endif %}
        <div class="row">
            <legend class="col-form-label col-3 py-0"><h5>{{ field.label }}</h5></legend>
            <div class="col">
                {% for value, name in field.field.choices %}
                {% if value != '' %}
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="{{ field.name }}" value="{{ value }}" {% if value|safe == field.value|safe %}checked{% endif %}>
                  <label class="form-check-label" for="{{ value }}">{{ name }}</label>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        </fieldset>
    {% else %}
        <div class="form-group">
            {% if field.errors %}
            <div class="row">
            <div class="col alert alert-danger">{% for error in field.errors %}<p class="my-1">{{ error }}</p>{% endfor %}</div>
            </div>
            {% endif %}
            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
        </div>
    {% endif %}

    {% endfor %}
    {% endwith %}

    <div class="row mt-5">
        <div class="col-6 offset-3">
        <input type="submit" value="Submit" class="btn btn-lg btn-block btn-outline-primary">
        </div>
    </div>
    </form>
</div>
{% endspaceless %}

</div>
<style type="text/css">
    html, body {
        height: 100%;
    }
</style>
{% endblock %}
