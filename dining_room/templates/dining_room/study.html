{% extends "base.html" %}

{% load static %}

{% block styles %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin>
<link rel="stylesheet" href="{% static 'dining_room/study.css' %}">
{% endblock %}

{% block content %}
<!-- We want to set these constant before the React app is loaded -->
<script type="text/javascript">
    window.constants = {
        START_STATE: "{{ request.user.start_condition }}",
        CURRENT_STATE: "{{ current_state }}",
        CURRENT_TRANSITION: "{{ current_transition }}",
        NEXT_URL: "{% url 'dining_room:survey' %}",
        EXPERIMENT_CONDITION: {
            show_dx_suggestions: {{ request.user.show_dx_suggestions|yesno:"true,false" }},
            show_ax_suggestions: {{ request.user.show_ax_suggestions|yesno:"true,false" }}
        },
        ACTIONS: {{ actions_constant|safe }},
        DIAGNOSES: {{ diagnoses_constant|safe }}
    };
</script>

<div id="app">
</div>
<noscript>You need to enable JavaScript for this study</noscript>
{% endblock %}

{% block scripts %}
<script src="{% static 'dining_room/study.js' %}"></script>
{% endblock %}
